---
# tasks file for install-docker
- name: remove the Apache package
  yum:
    name: [ 
            'docker',
            'docker-client',
            'docker-client-latest',
            'docker-common',
            'docker-latest',
            'docker-latest-logrotate',
            'docker-logrotate',
            'docker-engine'
          ]
    state: removed

- name: Install prerequisites in yum
  yum:
    name: ['yum-utils','device-mapper-persistent-data','lvm2', 'libselinux-python']
    update_cache: yes

- name: Adding docker repository
  shell: yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

- name: Install Docker
  yum:
    name: ['docker-ce','docker-ce-cli','containerd.io','python-pip']
    update_cache: yes
    state: present

- name: "Increasing heap memory"
  shell: sysctl -w vm.max_map_count=262144